{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/main.ts","src/types.ts","src/util.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","types_1","util_1","generateIdeology","document","getElementById","disabled","ideologyParts","prefixCount","getRandomIntInclusive","push","prefixes","Math","floor","random","heads","ideologyName","forEach","part","concat","name","button","isAnarchist","includes","isNational","colorSet","Set","symbolSet","colors","color","add","symbols","symbol","size","has","Color","BLACK","delete","ctx","getContext","fillStyle","fillRect","colorArray","Array","from","pop","h","l","shuffle","FlagType","__LENGTH","DIAGONAL_SPLIT","beginPath","moveTo","lineTo","fill","STRIPE","symbolArray","symbolImage_1","Image","addEventListener","drawImage","arc","PI","src","getFilename","WHITE","drawFlag","textContent","onclick","IdeologyPart","this","slice","RED","BLUE","GREEN","ORANGE","PINK","PURPLE","YELLOW","TEAL","s","Symbol","prototype","filename","ALGIZ","HS_CN","HS_CPUSA","HS_USSR","JUCHE","SWASTIKA","STAR_DAVID","DHARMA","CROSS","LABRYS","STAR_CRESCENT","FASCES","min","max","ceil","getRandomItem","set","items","j","_a"],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import {\n    IdeologyPart,\n    Color,\n    Symbol,\n    FlagType,\n    prefixes,\n    heads,\n} from \"./types\";\nimport {\n    getRandomIntInclusive,\n    shuffle\n} from \"./util\";\n\nfunction drawFlag(ideologyParts: IdeologyPart[], ideologyName: string) {\n    const button = <HTMLButtonElement>document.getElementById(\"regen\");\n    const isAnarchist = (ideologyName.includes(\"anarch\") || ideologyName.includes(\"mutualism\"));\n    const isNational = (ideologyName.includes(\"national\") && !ideologyName.includes(\"international\"));\n    let colorSet = new Set<Color>();\n    let symbolSet = new Set<Symbol>();\n    ideologyParts.forEach(part => {\n        part.colors.forEach(color => {\n            colorSet.add(color);\n        });\n        part.symbols.forEach(symbol => {\n            symbolSet.add(symbol);\n        });\n    });\n\n    if (isAnarchist && colorSet.size > 1 && colorSet.has(Color.BLACK)) {\n        colorSet.delete(Color.BLACK);\n    }\n\n    let canvas = <HTMLCanvasElement>document.getElementById(\"flagCanvas\");\n    let ctx = canvas.getContext(\"2d\");\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, 600, 400);\n\n    let colorArray = Array.from(colorSet);\n\n    if ((colorArray.length == 2 && symbolSet.size > 0) || (colorArray.length == 1)) {\n        const color = colorArray.pop();\n        ctx.fillStyle = `hsl(${color.h}, 100%, ${color.l}%)`;\n        ctx.fillRect(0, 0, 600, 400);\n    } else if (colorArray.length >= 2) {\n        shuffle(colorArray);\n        let color = colorArray.pop();\n        ctx.fillStyle = `hsl(${color.h}, 100%, ${color.l}%)`;\n        ctx.fillRect(0, 0, 600, 400);\n\n        color = colorArray.pop();\n        ctx.fillStyle = `hsl(${color.h}, 100%, ${color.l}%)`;\n        const flagType: FlagType = getRandomIntInclusive(0, FlagType.__LENGTH - 1);\n        switch (flagType) {\n            case FlagType.DIAGONAL_SPLIT: {\n                ctx.beginPath();\n                ctx.moveTo(0, 0);\n                ctx.lineTo(600, 0);\n                ctx.lineTo(600, 400);\n                ctx.fill();\n                break;\n            }\n            case FlagType.STRIPE: {\n                ctx.fillRect(0, 80, 600, 80);\n                ctx.fillRect(0, 240, 600, 80);\n            }\n        }\n    }\n\n    if (isAnarchist) {\n        ctx.fillStyle = \"black\";\n        ctx.beginPath();\n        ctx.moveTo(0, 400);\n        ctx.lineTo(600, 0);\n        ctx.lineTo(600, 400);\n        ctx.fill();\n    }\n\n    let symbolArray = Array.from(symbolSet);\n    shuffle(symbolArray);\n    if (symbolArray.length > 0) {\n        const symbolImage = new Image();\n        symbolImage.addEventListener('load', function () {\n            ctx.drawImage(symbolImage, 0, 0);\n            button.disabled = false;\n        }, false);\n        if (isNational) { // draw black symbol in white circle\n            ctx.fillStyle = \"white\";\n            ctx.beginPath();\n            ctx.arc(300, 200, 160, 0, Math.PI * 2, false);\n            ctx.fill();\n\n            symbolImage.src = \"./images/symbol/\".concat(symbolArray[0].getFilename(Color.BLACK));\n        } else if (colorArray.length > 0) {\n            symbolImage.src = \"./images/symbol/\".concat(symbolArray[0].getFilename(colorArray.pop()));\n        } else {\n            symbolImage.src = \"./images/symbol/\".concat(symbolArray[0].getFilename(Color.WHITE));\n        }\n    } else {\n        button.disabled = false;\n    }\n}\n\nfunction generateIdeology() {\n    const button = <HTMLButtonElement>document.getElementById(\"regen\");\n    button.disabled = true;\n\n    let ideologyParts: IdeologyPart[] = [];\n    const prefixCount = getRandomIntInclusive(1, 3);\n\n    for (let i = 0; i < prefixCount; i++) {\n        ideologyParts.push(prefixes[Math.floor(Math.random() * prefixes.length)])\n    }\n\n    ideologyParts.push(heads[Math.floor(Math.random() * heads.length)])\n\n    let ideologyName = \"\";\n    ideologyParts.forEach(part => {\n        ideologyName = ideologyName.concat(part.name);\n    });\n\n    if (Math.random() < 0.01) {\n        ideologyName = ideologyName.concat(\" with chinese characteristics\");\n    }\n\n    drawFlag(ideologyParts, ideologyName);\n\n    document.getElementById(\"ideologyLabel\").textContent = ideologyName;\n}\n\n\n\ndocument.getElementById(\"regen\").onclick = generateIdeology;\ngenerateIdeology();","// ideology prefix or head plus associated colors and symbol\nclass IdeologyPart {\n    constructor(public name: string, public colors: Color[] = [], public symbols: Symbol[] = []) {\n        this.name = (name.slice(-1) === \"-\" ? name : name.concat(\" \"));\n        this.colors = colors;\n        this.symbols = symbols;\n    }\n}\n\n// HSL color\nclass Color {\n    constructor(public h: number, public s: number = 100, public l: number) {\n        this.h = h;\n        this.s = s;\n        this.l = l;\n    }\n    public static readonly RED = new Color(0, 100, 50);\n    public static readonly BLUE = new Color(240, 100, 50);\n    public static readonly GREEN = new Color(120, 100, 50);\n    public static readonly ORANGE = new Color(39, 100, 50);\n    public static readonly PINK = new Color(330, 100, 71);\n    public static readonly PURPLE = new Color(300, 100, 25);\n    public static readonly YELLOW = new Color(60, 100, 50);\n    public static readonly TEAL = new Color(180, 100, 25);\n    public static readonly WHITE = new Color(0, 0, 100);\n    public static readonly BLACK = new Color(0, 0, 0);\n}\n\nclass Symbol {\n    constructor(private filename: string) { this.filename = filename }\n    getFilename(c: Color) {\n        switch (c) {\n            case Color.RED: return this.filename.concat(\"_red.png\");\n            case Color.BLUE: return this.filename.concat(\"_blue.png\");\n            case Color.GREEN: return this.filename.concat(\"_green.png\");\n            case Color.ORANGE: return this.filename.concat(\"_orange.png\");\n            case Color.PINK: return this.filename.concat(\"_pink.png\");\n            case Color.PURPLE: return this.filename.concat(\"_purple.png\");\n            case Color.YELLOW: return this.filename.concat(\"_yellow.png\");\n            case Color.TEAL: return this.filename.concat(\"_teal.png\");\n            case Color.WHITE: return this.filename.concat(\"_white.png\");\n            case Color.BLACK: return this.filename.concat(\"_black.png\");\n        }\n    }\n\n    public static readonly ALGIZ = new Symbol(\"algiz\");\n    public static readonly HS_CN = new Symbol(\"hs_cn\");\n    public static readonly HS_CPUSA = new Symbol(\"hs_cpusa\");\n    public static readonly HS_USSR = new Symbol(\"hs_ussr\");\n    public static readonly JUCHE = new Symbol(\"juche\");\n    public static readonly SWASTIKA = new Symbol(\"swastika\");\n    public static readonly STAR_DAVID = new Symbol(\"david\");\n    public static readonly DHARMA = new Symbol(\"dharma\");\n    public static readonly CROSS = new Symbol(\"cross\");\n    public static readonly LABRYS = new Symbol(\"labrys\");\n    public static readonly STAR_CRESCENT = new Symbol(\"starcrescent\");\n    public static readonly FASCES = new Symbol(\"fasces\");\n}\n\nenum FlagType {\n    STRIPE,\n    DIAGONAL_SPLIT,\n    __LENGTH\n}\n\nconst prefixes = [\n    new IdeologyPart(\"left-\", [Color.RED, Color.BLACK]),\n    new IdeologyPart(\"right-\", [Color.YELLOW, Color.BLUE]),\n    new IdeologyPart(\"proto-\"),\n    new IdeologyPart(\"post-\"),\n    new IdeologyPart(\"neo-\"),\n    new IdeologyPart(\"paleo-\"),\n    new IdeologyPart(\"marxism-\", [Color.RED], [Symbol.HS_CN, Symbol.HS_USSR]),\n    new IdeologyPart(\"leninism-\", [Color.RED], [Symbol.HS_USSR]),\n    new IdeologyPart(\"eco-\", [Color.GREEN]),\n    new IdeologyPart(\"techno-\"),\n    new IdeologyPart(\"crypto-\"),\n    new IdeologyPart(\"anarcho-\", [Color.BLACK]),\n    new IdeologyPart(\"anarcha-\", [Color.PURPLE]),\n    new IdeologyPart(\"alt-\"),\n    new IdeologyPart(\"cyber-\"),\n    new IdeologyPart(\"ultra-\"),\n    new IdeologyPart(\"judeo-\", [], [Symbol.STAR_DAVID]),\n    new IdeologyPart(\"trans-exclusionary\", [Color.PURPLE], [Symbol.LABRYS]),\n    new IdeologyPart(\"classical\"),\n    new IdeologyPart(\"orthodox\"),\n    new IdeologyPart(\"post-left\"),\n    new IdeologyPart(\"left\", [Color.RED]),\n    new IdeologyPart(\"right\"),\n    new IdeologyPart(\"gender-abolitionist\", [Color.PURPLE, Color.PINK]),\n    new IdeologyPart(\"libertarian\", [Color.YELLOW]),\n    new IdeologyPart(\"conservative\", [Color.RED]),\n    new IdeologyPart(\"egoist\", [Color.TEAL]),\n    new IdeologyPart(\"authoritarian\"),\n    new IdeologyPart(\"christian\", [Color.ORANGE], [Symbol.CROSS]),\n    new IdeologyPart(\"islamic\", [], [Symbol.STAR_CRESCENT]),\n    new IdeologyPart(\"buddhist\", [], [Symbol.DHARMA]),\n    new IdeologyPart(\"green\", [Color.GREEN]),\n    new IdeologyPart(\"individualist\", [Color.YELLOW]),\n    new IdeologyPart(\"collectivist\", [Color.RED]),\n    new IdeologyPart(\"democratic\", [Color.BLUE]),\n    new IdeologyPart(\"radical\", [Color.RED]),\n    new IdeologyPart(\"utopian\"),\n    new IdeologyPart(\"scientific\"),\n    new IdeologyPart(\"egalitarian\"),\n    new IdeologyPart(\"hegelian\"),\n    new IdeologyPart(\"marxist\", [Color.RED]),\n    new IdeologyPart(\"primitive\", [Color.GREEN]),\n    new IdeologyPart(\"liberal\", [Color.YELLOW]),\n    new IdeologyPart(\"fascist\", [], [Symbol.FASCES]),\n    new IdeologyPart(\"state\"),\n    new IdeologyPart(\"national\", [Color.RED]),\n    new IdeologyPart(\"international\"),\n    new IdeologyPart(\"queer\", [Color.PINK]),\n    new IdeologyPart(\"pagan\", [], [Symbol.ALGIZ])\n];\nconst heads = [\n    new IdeologyPart(\"anarchism\", [Color.BLACK]),\n    new IdeologyPart(\"communism\", [Color.RED], [Symbol.HS_CN, Symbol.HS_USSR, Symbol.HS_CPUSA]),\n    new IdeologyPart(\"socialism\", [Color.RED], [Symbol.HS_CN, Symbol.HS_USSR, Symbol.HS_CPUSA]),\n    new IdeologyPart(\"maoism\", [Color.RED, Color.YELLOW], [Symbol.HS_CN]),\n    new IdeologyPart(\"juche\", [Color.RED, Color.YELLOW], [Symbol.JUCHE]),\n    new IdeologyPart(\"marxism\", [Color.RED]),\n    new IdeologyPart(\"leninism\", [Color.RED, Color.YELLOW], [Symbol.HS_USSR]),\n    new IdeologyPart(\"trotskyism\", [Color.RED], [Symbol.HS_USSR]),\n    new IdeologyPart(\"deng xiaoping thought\", [Color.RED, Color.YELLOW], [Symbol.HS_CN]),\n    new IdeologyPart(\"posadism\", [Color.RED]),\n    new IdeologyPart(\"corporatism\", [Color.RED]),\n    new IdeologyPart(\"fascism\", [], [Symbol.FASCES]),\n    new IdeologyPart(\"nazism\", [Color.RED], [Symbol.SWASTIKA]),\n    new IdeologyPart(\"monarchism\", [Color.PURPLE]),\n    new IdeologyPart(\"democracy\", [Color.BLUE]),\n    new IdeologyPart(\"liberalism\", [Color.YELLOW]),\n    new IdeologyPart(\"libertarianism\", [Color.YELLOW]),\n    new IdeologyPart(\"centrism\", [Color.WHITE]),\n    new IdeologyPart(\"primitivism\", [Color.GREEN]),\n    new IdeologyPart(\"anarchism\", [Color.BLACK]),\n    new IdeologyPart(\"mutualism\", [Color.ORANGE]),\n    new IdeologyPart(\"individualism\", [Color.YELLOW]),\n]\n\nexport {\n    IdeologyPart,\n    Color,\n    Symbol,\n    FlagType,\n    prefixes,\n    heads\n};","function getRandomIntInclusive(min: number, max: number): number {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction getRandomItem<T>(set: Set<T>): T {\n    const items = Array.from(set);\n    return items[Math.floor(Math.random() * items.length)];\n}\n\nfunction shuffle<T>(a: Array<T>) {\n    for (let i = a.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [a[i], a[j]] = [a[j], a[i]];\n    }\n}\nexport {\n    getRandomIntInclusive,\n    getRandomItem,\n    shuffle\n};"]}